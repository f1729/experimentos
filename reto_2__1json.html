<!DOCTYPE html>
<html>
<head>
  <title>
    Reto2 js
  </title>
</head>
<body>
  <style>
    ul.a {list-style-type: none;}

    .container {
      background-color: #0a0a0a;
      width: 100px;
      height: auto;
      padding: 10px;
    }
    .circle {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      opacity: 0.35;
      margin: 10px auto;
    }
    .green {
      background-color: green;
    }
    .yellow {
      background-color: yellow;
    }
    .red {
      background-color: red;
    }

    .active {
      opacity: 1;
    }
  </style>

  <div class="container">
    <div class="circle green"></div>
    <div class="circle yellow"></div>
    <div class="circle red"></div>
  </div>
  <script type="text/javascript">
    const semaforo = {
      "colors": {
        "green": {
          "active": true
        },
        "yellow": {
          "active": false
        },
        "red": {
          "active": false
        }
      }
    };
    const colors = Object.keys(semaforo.colors); // ["green", "yellow", "red"]

    function activeColor(semaforo, colorIndex) {
      semaforo.colors[colors[colorIndex]].active = true;
      document.querySelector('.' + colors[colorIndex]).classList.add('active');
      setTimeout(() => {
        semaforo.colors[colors[colorIndex]].active = false;
        document.querySelector('.' + colors[colorIndex]).classList.remove('active');
      }, 2000)
    }

    /*
    semaforo.colors[color].active = false;
    console.log(color, index);
    if (index >= colors.length - 1) {
      index = -1;
    }
    const nextColor = colors[index + 1];
    semaforo.colors[nextColor].active = true;
    */
    let counter = 0;
    setInterval(() => {
      let current = activeColor(semaforo, counter); // ["green", 0]
      counter++
      if (counter > colors.length - 1) {
        counter = 0;
      } 
    }, 2000);

  </script>

  <ul class="a">
      <li>
        <canvas id="c1" width="140" height="150" style="border:1px solid #d3d3d3;">
        </canvas>
      </li>
      <li>
        <canvas id="c2" width="140" height="150" style="border:1px solid #d3d3d3;">
        </canvas>
      </li>
      <li>
        <canvas id="c3" width="140" height="150" style="border:1px solid #d3d3d3;">
        </canvas>
      </li>
  </ul>
      
  <script language="JavaScript">
        var circulo1, circulo2, circulo3;

        window.onload = function() {
          var elemento = document.getElementById('c1');
          var fondo = elemento.getContext('2d');
          fondo.beginPath();
          fondo.rect(1,1,200,350);
          fondo.fillStyle = "black";
          fondo.fill();
          //
          circulo1 = elemento.getContext('2d');
          circulo1.beginPath();
          circulo1.arc(65, 65, 40, 0, 2 * Math.PI,false);
          circulo1.fillStyle ="red"; //relleno del color
          circulo1.fill();   //ejecutando metodo fill
          circulo1.stroke(); //borde
          
          var elemento = document.getElementById('c2');
          var fondo = elemento.getContext('2d');
          fondo.beginPath();
          fondo.rect(1,1,200,350);
          fondo.fillStyle = "black";
          fondo.fill();
          //
          circulo2 = elemento.getContext('2d');
          circulo2.beginPath();
          circulo2.arc(65, 75, 40, 0, 2 * Math.PI);
          circulo2.fillStyle = "yellow";
          circulo2.fill();
          circulo2.stroke();
      
          var elemento = document.getElementById('c3');          
          var fondo = elemento.getContext('2d');
          fondo.beginPath();
          fondo.rect(1,1,200,350);
          fondo.fillStyle = "black";
          fondo.fill();
          //
          circulo3 = elemento.getContext('2d');
          circulo3.beginPath();
          circulo3.arc(65, 85, 40, 0, 2 * Math.PI);
          circulo3.fillStyle = "#00ff00";
          circulo3.fill();
          circulo3.stroke();
    }

    function cambiar() {
      const semaforo = {
            "colors": {
                  "green": {
                    "active": false
                  },
                  "yellow": {
                    "active": false
                  },
                  "red": {
                    "active": true
                  }
            }
        }

        if(semaforo.colors.red) {
          circulo1.fillStyle = "#800000"; 
          circulo2.fillStyle = "yellow";
          circulo3.fillStyle = "#003300";
          
          circulo1.fill();
          circulo2.fill();
          circulo3.fill();
            

            }
      }

    function cambiar2() {
      const semaforo = {
            "colors": {
                  "green": {
                    "active": false
                  },
                  "yellow": {
                    "active": true
                  },
                  "red": {
                    "active": false
                  }
            }
        }
        if (semaforo.colors.yellow) {
          circulo1.fillStyle = "#800000";
          circulo2.fillStyle = "#808000"; 
          circulo3.fillStyle = "#00ff00";//verde
          
          circulo1.fill();
          circulo2.fill();
          circulo3.fill();
        } 

      }

    function cambiar3() {
      const semaforo = {
            "colors": {
                  "green": {
                    "active": true
                  },
                  "yellow": {
                    "active": false
                  },
                  "red": {
                    "active": false
                  }
            }
        }
        if (semaforo.colors.green) {
          circulo1.fillStyle = "red";
          circulo2.fillStyle = "#808000";
          circulo3.fillStyle = "#003300";
          
          circulo1.fill();
          circulo2.fill();
          circulo3.fill();
        } 

      }

    setInterval('cambiar()',3000);
    setInterval('cambiar2()',5000);
    setInterval('cambiar3()',7000);
  </script>

</body>
</html>